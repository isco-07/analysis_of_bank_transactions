import pandas as pd
import pytest


@pytest.fixture()
def tr_list():
    return [
        {
            "Дата платежа": "22.09.2019",
            "Номер карты": "*7197",
            "Статус": "OK",
            "Сумма операции": -395.0,
            "Валюта операции": "RUB",
            "Сумма платежа": -395.0,
            "Валюта платежа": "RUB",
            "Кэшбэк": "nan",
            "Категория": "Рестораны",
            "MCC": 5812.0,
            "Описание": "iL Патио",
            "Бонусы (включая кэшбэк)": 7,
            "Округление на инвесткопилку": 0,
            "Сумма операции с округлением": 395.0,
        },
        {
            "Дата платежа": "23.09.2019",
            "Номер карты": "*4556",
            "Статус": "OK",
            "Сумма операции": -3000.0,
            "Валюта операции": "RUB",
            "Сумма платежа": -342.86,
            "Валюта платежа": "CNY",
            "Кэшбэк": "nan",
            "Категория": "Наличные",
            "MCC": 6011.0,
            "Описание": "Снятие в банкомате Сбербанк",
            "Бонусы (включая кэшбэк)": 0,
            "Округление на инвесткопилку": 0,
            "Сумма операции с округлением": 342.86,
        },
        {
            "Дата платежа": "21.09.2019",
            "Номер карты": "nan",
            "Статус": "OK",
            "Сумма операции": -500.0,
            "Валюта операции": "CNY",
            "Сумма платежа": -4613.5,
            "Валюта платежа": "RUB",
            "Кэшбэк": "nan",
            "Категория": "Переводы",
            "MCC": "nan",
            "Описание": "Перевод между счетами",
            "Бонусы (включая кэшбэк)": 0,
            "Округление на инвесткопилку": 0,
            "Сумма операции с округлением": 4613.5,
        },
        {
            "Дата платежа": "21.09.2019",
            "Номер карты": "nan",
            "Статус": "OK",
            "Сумма операции": 500.0,
            "Валюта операции": "CNY",
            "Сумма платежа": 500.0,
            "Валюта платежа": "CNY",
            "Кэшбэк": "nan",
            "Категория": "Переводы",
            "MCC": "nan",
            "Описание": "Перевод между счетами",
            "Бонусы (включая кэшбэк)": 0,
            "Округление на инвесткопилку": 0,
            "Сумма операции с округлением": 500.0,
        },
        {
            "Дата платежа": "21.09.2019",
            "Номер карты": "nan",
            "Статус": "OK",
            "Сумма операции": 54871.96,
            "Валюта операции": "RUB",
            "Сумма платежа": 54871.96,
            "Валюта платежа": "RUB",
            "Кэшбэк": "nan",
            "Категория": "Переводы",
            "MCC": "nan",
            "Описание": "Перевод Кредитная карта. ТП 10.2 RUR",
            "Бонусы (включая кэшбэк)": 0,
            "Округление на инвесткопилку": 0,
            "Сумма операции с округлением": 54871.96,
        },
        {
            "Дата платежа": "21.09.2019",
            "Номер карты": "nan",
            "Статус": "OK",
            "Сумма операции": -54871.96,
            "Валюта операции": "RUB",
            "Сумма платежа": -54871.96,
            "Валюта платежа": "RUB",
            "Кэшбэк": "nan",
            "Категория": "Переводы",
            "MCC": "nan",
            "Описание": "Перевод Кредитная карта. ТП 10.2 RUR",
            "Бонусы (включая кэшбэк)": 0,
            "Округление на инвесткопилку": 0,
            "Сумма операции с округлением": 54871.96,
        },
        {
            "Дата платежа": "22.09.2019",
            "Номер карты": "*7197",
            "Статус": "OK",
            "Сумма операции": -850.0,
            "Валюта операции": "RUB",
            "Сумма платежа": -850.0,
            "Валюта платежа": "RUB",
            "Кэшбэк": "nan",
            "Категория": "Ж/д билеты",
            "MCC": 4111.0,
            "Описание": "Аэроэкспресс",
            "Бонусы (включая кэшбэк)": 17,
            "Округление на инвесткопилку": 0,
            "Сумма операции с округлением": 850.0,
        },
        {
            "Дата платежа": "22.09.2019",
            "Номер карты": "*7197",
            "Статус": "OK",
            "Сумма операции": -55.0,
            "Валюта операции": "RUB",
            "Сумма платежа": -55.0,
            "Валюта платежа": "RUB",
            "Кэшбэк": "nan",
            "Категория": "Ж/д билеты",
            "MCC": 4111.0,
            "Описание": "Московский метрополитен",
            "Бонусы (включая кэшбэк)": 1,
            "Округление на инвесткопилку": 0,
            "Сумма операции с округлением": 55.0,
        },
        {
            "Дата платежа": "22.09.2019",
            "Номер карты": "*7197",
            "Статус": "OK",
            "Сумма операции": -200.0,
            "Валюта операции": "RUB",
            "Сумма платежа": -200.0,
            "Валюта платежа": "RUB",
            "Кэшбэк": "nan",
            "Категория": "Ж/д билеты",
            "MCC": 4111.0,
            "Описание": "Метро Санкт-Петербург",
            "Бонусы (включая кэшбэк)": 4,
            "Округление на инвесткопилку": 0,
            "Сумма операции с округлением": 200.0,
        },
        {
            "Дата платежа": "21.09.2019",
            "Номер карты": "*7197",
            "Статус": "OK",
            "Сумма операции": -88.0,
            "Валюта операции": "RUB",
            "Сумма платежа": -88.0,
            "Валюта платежа": "RUB",
            "Кэшбэк": "nan",
            "Категория": "Фастфуд",
            "MCC": 5814.0,
            "Описание": "Rumyanyj Khleb",
            "Бонусы (включая кэшбэк)": 1,
            "Округление на инвесткопилку": 0,
            "Сумма операции с округлением": 88.0,
        },
        {
            "Дата платежа": "22.09.2019",
            "Номер карты": "*7197",
            "Статус": "OK",
            "Сумма операции": -177.0,
            "Валюта операции": "RUB",
            "Сумма платежа": -177.0,
            "Валюта платежа": "RUB",
            "Кэшбэк": "nan",
            "Категория": "Транспорт",
            "MCC": 4121.0,
            "Описание": "Яндекс Такси",
            "Бонусы (включая кэшбэк)": 3,
            "Округление на инвесткопилку": 0,
            "Сумма операции с округлением": 177.0,
        },
        {
            "Дата платежа": "22.09.2019",
            "Номер карты": "*7197",
            "Статус": "OK",
            "Сумма операции": -252.0,
            "Валюта операции": "RUB",
            "Сумма платежа": -252.0,
            "Валюта платежа": "RUB",
            "Кэшбэк": "nan",
            "Категория": "Транспорт",
            "MCC": 4121.0,
            "Описание": "Яндекс Такси",
            "Бонусы (включая кэшбэк)": 5,
            "Округление на инвесткопилку": 0,
            "Сумма операции с округлением": 252.0,
        },
        {
            "Дата платежа": "23.09.2019",
            "Номер карты": "*7197",
            "Статус": "OK",
            "Сумма операции": -90.0,
            "Валюта операции": "RUB",
            "Сумма платежа": -90.0,
            "Валюта платежа": "RUB",
            "Кэшбэк": "nan",
            "Категория": "Фастфуд",
            "MCC": 5814.0,
            "Описание": "IP Yakubovskaya M. V.",
            "Бонусы (включая кэшбэк)": 1,
            "Округление на инвесткопилку": 0,
            "Сумма операции с округлением": 90.0,
        },
    ]


@pytest.fixture
def dataframe():
    return pd.DataFrame(
        [
            {
                "date": "2023-09-05T11:30:32Z",
                "amount": "26165.0",
                "currency_name": "rubles",
                "currency_code": "RUB",
            },
        ]
    )


@pytest.fixture()
def settings():
    return {"user_currencies": ["USD"], "user_stocks": ["AAPL"]}
